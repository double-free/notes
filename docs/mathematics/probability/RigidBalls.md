# 小球碰撞问题中的统计学

朋友给我发了一道笔试题让我帮忙做。题目大概是这样：
> (1) 有 1 个小球放在一个 1m 长的光滑凹槽里，小球初始位置随机（均匀分布），初始速度 1m/s，方向随机。求小球滑出凹槽的期望值。<br/> (2) 如果有 2 个小球，且小球碰撞为刚性碰撞，求两个小球全部从凹槽掉落的时间期望值。 <br/> (3) 如果有 n 个小球呢？

这道题其实用直觉做很简单。主要有两个关窍：
1. 刚性碰撞后，小球交换速度
  动量守恒+能量守恒
2. n 个小球在轨道上均匀分布大概是什么样？
  其期望就是均匀把轨道分成 n + 1 份。

因此答案是：1/2，2/3，和 n/(n+1)

当然，这完全不够严谨。下面进入数学部分。

## N 个独立同分布最大值的期望
这道题可以提炼出一个数学问题，即求 N 个独立同分布最大值的期望。

假设 $Y$ 是 N 个随机变量的最大值，则 $Y$ 的累积分布函数（Cumulative Distribution Function）为：

$$G(y) = P(Y \leq y) = P( \max(X_1, X_2, ..., X_n) \leq y)$$

由于 X 相互独立，上式等价于：

$$\begin{align}
G(y) &= P(X_1 \leq y) P( X_2 \leq y) P(X_n \leq y) \\
  &= F^n(y)
\end{align}$$

其中 $F$ 表示 $X$ 的累积分布函数。


那么 y 的期望值可以表示为：

$$\begin{align}
E(Y) &= \int_a^b y G'(y) dy \\
    &= yG(y)|_a^b - \int_a^bG(y)dy \\
    &= b -  \int_a^bF^n(y)dy
\end{align}$$


### 均匀分布情形

对于 $(a, b)$ 区间上的均匀分布有：

$$F(x) = \frac{x-a}{b-a}$$

故

$$\begin{align}
E(Y) &=  b -  \int_a^bF^n(y)dy \\
    &= b - \frac{1}{(b-a)^n} \int_a^b(y-a)^n dy \\
    &= b - \frac{b-a}{n+1} \\
    &= \frac{a + nb}{n+1}
\end{align}$$

带入题目中的区间 $(0,1)$ 得到：

$$E(Y) = \frac{n}{n+1}$$
