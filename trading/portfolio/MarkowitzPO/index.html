
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Ye">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.15">
    
    
      
        <title>Portfolio Optimization with Known Parameters - My Notes</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.c382b1dc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.cc9b2e1e.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#portfolio-optimization-with-known-parameters" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="My Notes" class="md-header__button md-logo" aria-label="My Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            My Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Portfolio Optimization with Known Parameters
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="My Notes" class="md-nav__button md-logo" aria-label="My Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    My Notes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Ye's Notes
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Computer science
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Computer science" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Computer science
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          Algorithm
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Algorithm" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Algorithm
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../computer-science/algorithm/swiss_map/" class="md-nav__link">
        Hash Table in Rust: SwissTable
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          Lgbm
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Lgbm" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Lgbm
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../computer-science/lgbm/LgbmL1AndL2/" class="md-nav__link">
        LightGBM 参数中的 lambda_l1 和 lambda_l2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../computer-science/lgbm/LgbmVol1/" class="md-nav__link">
        LightGBM 实战：波动率预测(1)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../computer-science/lgbm/LgbmVol2/" class="md-nav__link">
        LightGBM 实战：波动率预测(2)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../computer-science/lgbm/LightGBM/" class="md-nav__link">
        Light GBM 原理
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3">
          Memory
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Memory" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Memory
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../computer-science/memory/CPU_Caches/" class="md-nav__link">
        Memory3: CPU Caches
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Mathematics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Mathematics" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Mathematics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          CFR
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="CFR" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          CFR
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../mathematics/CFR/CfrAndKuhnPoker/" class="md-nav__link">
        Counterfactual Regret Minimization and Kuhn Poker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../mathematics/CFR/MonteCarloCfr/" class="md-nav__link">
        Monte Carlo CFR
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../mathematics/CFR/RegretMatchingAndBlottoGame/" class="md-nav__link">
        Regret Matching and Blotto Game
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2">
          ESL
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="ESL" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          ESL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../mathematics/ESL/ESL3_LinearMethodsForRegression/" class="md-nav__link">
        ESL 3: Linear Methods for Regression
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../mathematics/ESL/ESL4_LinearMethodsForClassification/" class="md-nav__link">
        ESL 4: Linear Methods for Classification
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../mathematics/ESL/ESL6_KernelSmoothingMethods/" class="md-nav__link">
        ESL6: Kernel Smoothing Methods
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_3">
          Matrix
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Matrix" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Matrix
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../mathematics/matrix/MatrixCalculus/" class="md-nav__link">
        向量和矩阵求导
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_4">
          Probability
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Probability" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Probability
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../mathematics/probability/RigidBalls/" class="md-nav__link">
        小球碰撞问题中的统计学
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../mathematics/probability/martingale/" class="md-nav__link">
        Martingale
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Trading
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Trading" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Trading
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_1">
          Option
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Option" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          Option
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../option/BSM/" class="md-nav__link">
        The Black-Scholes-Merton model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../option/BinomialTree/" class="md-nav__link">
        Binomial Trees
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../option/Greeks/" class="md-nav__link">
        The Greek letters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../option/Ito/" class="md-nav__link">
        Wiener processes and Ito’s lemma
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../option/Risk/" class="md-nav__link">
        Option Volatility and Pricing - Risks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../option/VolatilitySmile/" class="md-nav__link">
        Volatility Smile
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4_2">
          Portfolio
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Portfolio" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Portfolio
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Portfolio Optimization with Known Parameters
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Portfolio Optimization with Known Parameters
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-markowitz-mean-variance-portfolio-optimization" class="md-nav__link">
    1 Markowitz Mean-Variance Portfolio Optimization
  </a>
  
    <nav class="md-nav" aria-label="1 Markowitz Mean-Variance Portfolio Optimization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-mean-variance-trade-off-optimization" class="md-nav__link">
    1.1 Mean-Variance Trade-Off Optimization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#efficient-frontier" class="md-nav__link">
    Efficient Frontier
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-sharpe-ratio-optimization" class="md-nav__link">
    1.2 Sharpe Ratio Optimization
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-drawbacks-of-markowitz-framework" class="md-nav__link">
    2 Drawbacks of Markowitz Framework
  </a>
  
    <nav class="md-nav" aria-label="2 Drawbacks of Markowitz Framework">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-variance-is-not-a-good-risk-measurement" class="md-nav__link">
    2.1 Variance Is Not a Good Risk Measurement
  </a>
  
    <nav class="md-nav" aria-label="2.1 Variance Is Not a Good Risk Measurement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211-cvar-portfolio-optimization" class="md-nav__link">
    2.1.1 CVaR Portfolio Optimization
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-markowitz-framework-is-too-sensitive" class="md-nav__link">
    2.2 Markowitz Framework Is Too Sensitive
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" class="md-nav__link">
    Reference
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-markowitz-mean-variance-portfolio-optimization" class="md-nav__link">
    1 Markowitz Mean-Variance Portfolio Optimization
  </a>
  
    <nav class="md-nav" aria-label="1 Markowitz Mean-Variance Portfolio Optimization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-mean-variance-trade-off-optimization" class="md-nav__link">
    1.1 Mean-Variance Trade-Off Optimization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#efficient-frontier" class="md-nav__link">
    Efficient Frontier
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-sharpe-ratio-optimization" class="md-nav__link">
    1.2 Sharpe Ratio Optimization
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-drawbacks-of-markowitz-framework" class="md-nav__link">
    2 Drawbacks of Markowitz Framework
  </a>
  
    <nav class="md-nav" aria-label="2 Drawbacks of Markowitz Framework">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-variance-is-not-a-good-risk-measurement" class="md-nav__link">
    2.1 Variance Is Not a Good Risk Measurement
  </a>
  
    <nav class="md-nav" aria-label="2.1 Variance Is Not a Good Risk Measurement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211-cvar-portfolio-optimization" class="md-nav__link">
    2.1.1 CVaR Portfolio Optimization
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-markowitz-framework-is-too-sensitive" class="md-nav__link">
    2.2 Markowitz Framework Is Too Sensitive
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" class="md-nav__link">
    Reference
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="portfolio-optimization-with-known-parameters">Portfolio Optimization with Known Parameters</h1>
<p>首先引入一些之后使用的符号定义。</p>
<p>In practice, a portfolio deals with a whole universe of <span class="arithmatex">\(N\)</span> assets. We denote the log-returns of the <span class="arithmatex">\(N\)</span> assets at time index <span class="arithmatex">\(t\)</span> with the vector <span class="arithmatex">\(\mathbf{r}_t \in \mathbb{R}\)</span>.</p>
<p>The time index <span class="arithmatex">\(t\)</span> can denote any arbitrary period such as minutes, days, weeks, etc. The historical data before <span class="arithmatex">\(t\)</span> is denoted by <span class="arithmatex">\(\mathcal{F}_{t-1}\)</span>.</p>
<p>已知历史数据 <span class="arithmatex">\(\mathcal{F}_{t-1}\)</span>，我们可以将回报率分解为 <strong>期望回报率</strong> 和 <strong>噪声</strong>：</p>
<div class="arithmatex">\[ \mathbf{r}_t = \mathbf{\mu}_t + \mathbf{\varepsilon}_t \]</div>
<p>其中，<span class="arithmatex">\(\mathbf{\mu}_t\)</span> 是根据历史数据 <span class="arithmatex">\(\mathcal{F}_{t-1}\)</span> 计算得到的期望收益：</p>
<div class="arithmatex">\[\mathbf{\mu}_t = E(\mathbf{r}_t|\mathcal{F}_{t-1})\]</div>
<p><span class="arithmatex">\(\mathbf{\varepsilon}_t\)</span> 是均值为 0 的白噪声，其方差为：</p>
<div class="arithmatex">\[ \mathbf{\Sigma}_t = E[(\mathbf{r}_t - \mathbf{\mu}_t)(\mathbf{r}_t - \mathbf{\mu}_t)^T|\mathcal{F}_{t-1}] \]</div>
<p>我们通过历史数据主要是希望计算出 <span class="arithmatex">\(\mathbf{\mu}_t\)</span> 和 <span class="arithmatex">\(\mathbf{\Sigma}_t\)</span>。</p>
<p>如果我们简单假设 <span class="arithmatex">\(\mathbf{\mu}_t\)</span> 和 <span class="arithmatex">\(\mathbf{\Sigma}_t\)</span> 不随时间变化，即 <span class="arithmatex">\(\mathbf{r}_t\)</span> 是独立同分布的，则利用 <span class="arithmatex">\(1, ..., t-1\)</span> 时刻的历史数据，可以简单估计：</p>
<div class="arithmatex">\[ \mathbf{\mu}_t = \mathbf{\mu} = \frac{1}{t-1}\sum_{k=1}^{t-1} \mathbf{r}_k \]</div>
<div class="arithmatex">\[ \mathbf{\Sigma}_t = \mathbf{\Sigma} = \frac{1}{t-2} \sum_{k=1}^{t-1} (\mathbf{r}_k - \mathbf{\mu})(\mathbf{r}_k - \mathbf{\mu})^T \]</div>
<p>假设我们总资金为 <span class="arithmatex">\(B\)</span> 美元，假设每种资产配置的权重为 <span class="arithmatex">\(\mathbf{w}\)</span>，我们有：</p>
<ul>
<li><span class="arithmatex">\(B \mathbf{w}\)</span> 表示在每种资产投入的资金，可以为负数，代表 short selling</li>
<li>portfolio 的期望回报率是 <span class="arithmatex">\(\mathbf{w}^T \mathbf{\mu}\)</span></li>
<li>portfolio 的风险（即波动率）为 <span class="arithmatex">\(\sqrt{\mathbf{w}^T \mathbf{\Sigma} \mathbf{w}}\)</span></li>
</ul>
<h2 id="1-markowitz-mean-variance-portfolio-optimization">1 Markowitz Mean-Variance Portfolio Optimization</h2>
<p>Markowitz mean-variance framework 是组合优化理论的基石。它的目标是寻找回报和风险的最佳 trade-off。</p>
<h3 id="11-mean-variance-trade-off-optimization">1.1 Mean-Variance Trade-Off Optimization</h3>
<p>我们可以将组合优化问题表示为：</p>
<div class="arithmatex">\[\begin{align}
\mathop{\arg \max}_{\mathbf{w}} &amp; &amp; \mathbf{w}^T \mathbf{\mu} - \lambda \mathbf{w}^T\mathbf{\Sigma}\mathbf{w} \\
\text{s.t.} &amp; &amp;\mathbf{w} \mathbf{\mu} &gt;= \mu_0, \\
&amp; &amp;\mathbf{1}^T \mathbf{w} = 1
\end{align}\]</div>
<p>其中，<span class="arithmatex">\(\lambda\)</span> 参数反映投资者的风险厌恶程度。</p>
<p>该优化问题可以简单用 Lagrange multiplier 解决，令：</p>
<div class="arithmatex">\[ L(\mathbf{w}, \alpha) = \mathbf{w}^T \mathbf{\mu} - \lambda \mathbf{w}^T\mathbf{\Sigma}\mathbf{w} + \alpha (\mathbf{1}^T\mathbf{w} - 1) \]</div>
<p>解方程组：</p>
<div class="arithmatex">\[\begin{cases}
\dfrac{\partial L}{\partial \mathbf{w}} &amp;= \mathbf{\mu} - 2\lambda \mathbf{\Sigma}\mathbf{w} + \alpha\mathbf{1} = 0 \\
\dfrac{\partial L}{\partial \alpha} &amp;=  \mathbf{1}^T\mathbf{w} - \mathbf{1} = 0
\end{cases}\]</div>
<p>从 1 式得到：</p>
<div class="arithmatex">\[ \mathbf{w} = \frac{1}{2\lambda} \mathbf{\Sigma}^{-1}(\mathbf{\mu} + \alpha\mathbf{1})\]</div>
<p>将 <span class="arithmatex">\(\mathbf{w}\)</span> 带入 2 式，得到上式的 <span class="arithmatex">\(\alpha\)</span>：</p>
<div class="arithmatex">\[ \alpha = \dfrac{2\lambda - \mathbf{1}^T\mathbf{\Sigma}^{-1}\mathbf{\mu} }{\mathbf{1}^T\mathbf{\Sigma}^{-1}\mathbf{1}}\]</div>
<p>至此，该优化问题的最优解确定。</p>
<h3 id="efficient-frontier">Efficient Frontier</h3>
<p>有效边界</p>
<p><img alt="portfolios" src="../images/portfolios.png" /></p>
<p>所谓 capital market line，是指当一个交易者可以以无风险利率贷款和借款（理想状况）时的投资组合。</p>
<h3 id="12-sharpe-ratio-optimization">1.2 Sharpe Ratio Optimization</h3>
<p>夏普率(Sharpe Ratio) 表示每单位风险（波动率）的超额收益：</p>
<div class="arithmatex">\[ \text{SR} = \frac{\mathbf{w}^T \mathbf{\mu} - r_f}{\sqrt{\mathbf{w}^T \mathbf{\Sigma} \mathbf{w}}}\]</div>
<p>如果以最大夏普率为优化目标，则组合优化问题可以表示为：</p>
<div class="arithmatex">\[\begin{align}
\mathop{\arg \max}_{\mathbf{w}} &amp; &amp; \dfrac{\mathbf{w}^T \mathbf{\mu} - r_f}{\sqrt{\mathbf{w}^T\mathbf{\Sigma}\mathbf{w}}} \\
\text{s.t.} &amp; &amp;\mathbf{1}^T \mathbf{w} = 1
\end{align}\]</div>
<p>该问题不是一个凸优化问题，因此无法直接求解。注意到 <span class="arithmatex">\(\mathbf{w}^T \mathbf{1} = 1\)</span>，可以改写为：</p>
<div class="arithmatex">\[\begin{align}
\mathop{\arg \max}_{\mathbf{w}} &amp; &amp; \dfrac{\mathbf{w}^T (\mathbf{\mu} - r_f \mathbf{1})}{\sqrt{\mathbf{w}^T\mathbf{\Sigma}\mathbf{w}}} \\
\text{s.t.} &amp; &amp;\mathbf{1}^T \mathbf{w} = 1
\end{align}\]</div>
<p>这样转化的意义是让目标函数与 <span class="arithmatex">\(\mathbf{w}\)</span> 的尺度无关。这是显然的，假设把 <span class="arithmatex">\(\mathbf{w}\)</span> 放大为 <span class="arithmatex">\(k \mathbf{w}\)</span>，由于分子和分母抵消，目标函数不变。</p>
<p>因此，条件 <span class="arithmatex">\(\mathbf{1}^T \mathbf{w} = 1\)</span> 可以放宽为 <span class="arithmatex">\(\mathbf{1}^T \mathbf{w} &gt; 0\)</span>。因此，我们总能找到一组 <span class="arithmatex">\(\mathbf{w}\)</span> 使得：</p>
<div class="arithmatex">\[\mathbf{w}^T (\mathbf{\mu} - r_f \mathbf{1}) = 1\]</div>
<p>那么，我们就可以固定这个分子为 1，转而寻找使分母最小的解，转化为一个凸优化问题：</p>
<div class="arithmatex">\[\begin{align}
\mathop{\arg \min}_{\mathbf{w}} &amp; &amp; \mathbf{w}^T\mathbf{\Sigma}\mathbf{w} \\
\text{s.t.} &amp; &amp;\mathbf{w}^T (\mathbf{\mu} - r_f \mathbf{1}) = 1 \\
&amp; &amp; \mathbf{1}^T \mathbf{w} &gt; 0
\end{align}\]</div>
<p>如果忽略 <span class="arithmatex">\(\mathbf{1}^T \mathbf{w} &gt; 0\)</span> 这个条件，则上式的解为：</p>
<div class="arithmatex">\[\mathbf{w}_{\text{SR}} = \dfrac{\mathbf{\Sigma}^{-1}(\mathbf{\mu} - r_f \mathbf{1})}{(\mathbf{\mu} - r_f \mathbf{1})^T \mathbf{\Sigma}^{-1} (\mathbf{\mu} - r_f \mathbf{1})}\]</div>
<p>这个最优解也有效边界上（图中蓝色的点），它是 capital market line 与 effective frontier 的交点。</p>
<h2 id="2-drawbacks-of-markowitz-framework">2 Drawbacks of Markowitz Framework</h2>
<p>虽然 Markowitz 的方法简单易懂，但是实际中却并不实用。因为它有两个主要缺陷：</p>
<ul>
<li>波动率并不是一个好的风险评价指标</li>
<li>对参数变化极其敏感</li>
</ul>
<h3 id="21-variance-is-not-a-good-risk-measurement">2.1 Variance Is Not a Good Risk Measurement</h3>
<p>在评价一个投资组合的时候，我们更加在意是否出现大的亏损，小额的亏损是可接受的波动，同时，我们不应该去惩罚大额的上涨。</p>
<p>因此，组合优化问题我们可以 <strong>只惩罚大额亏损</strong> 的情形。比较常用的风险测度是 Conditional Value at Risk (CVaR)。</p>
<h4 id="211-cvar-portfolio-optimization">2.1.1 CVaR Portfolio Optimization</h4>
<p>首先介绍 VaR (Value at Risk)。"p VaR" 表示损失高于 VaR 的可能性为 <span class="arithmatex">\(1-p\)</span>。换言之，损失低于 VaR 的概率至多为 <span class="arithmatex">\(p\)</span>。数学上定义，对于随机变量 <span class="arithmatex">\(X\)</span>，<span class="arithmatex">\(\text{VaR}_{p}(X)\)</span> 就是 <span class="arithmatex">\(X\)</span> 的 <span class="arithmatex">\(p-\text{quantile}\)</span>。</p>
<p>举例说明，假设某个 portfolio 的 95% VaR 是 100 万。则表示有 5% 的几率这个 portfolio 会亏损 100 万以上。</p>
<p>CVaR 是 VaR 的 <strong>条件期望值</strong>，即加权平均值。如下图所示：</p>
<p><img alt="VaR and CVaR" src="../images/VaR_and_CVaR.png" /></p>
<p>VaR 并不是一个 coherent risk measure，但是 CVaR 是，并且还能转化为凸优化问题。因此，得益于其良好的数学特性，CVaR 得到了广泛的实际应用。</p>
<div class="arithmatex">\[ \text{CVaR}_{1 - \varepsilon}(X) = E[X| X &gt; \text{VaR}_{1 - \varepsilon} (X)] \]</div>
<p>假设 <span class="arithmatex">\(\mathbf{r}\)</span> 是各个资产的回报率，portfolio 亏损是 <span class="arithmatex">\(-\mathbf{w}^T \mathbf{r}\)</span>，则组合优化问题为：</p>
<div class="arithmatex">\[\begin{align}
\mathop{\arg \min}_{\mathbf{w}} &amp; &amp; \text{CVaR}_{1 - \varepsilon} (-\mathbf{w}^T \mathbf{r}) \\
\text{s.t.} &amp; &amp; \mathbf{1}^T \mathbf{w} = 1 \\
\end{align}\]</div>
<p>这个优化问题是一个非凸优化。Rockafellar 和 Uryasev 引入了一个辅助函数来将其转化为凸优化问题：</p>
<div class="arithmatex">\[\begin{align}
F_{\varepsilon}(\mathbf{w}, \gamma) &amp;= \gamma +  \frac{1}{\varepsilon} E[\mathbf{w}^T \mathbf{r} - \gamma]^{+}\\
&amp;=\gamma + \frac{1}{\varepsilon} \int_{\mathbf{w}^T \mathbf{r} \geq \gamma}[\mathbf{w}^T \mathbf{r} - \gamma]p(x) dx
\end{align}\]</div>
<p>其中：</p>
<ol>
<li><span class="arithmatex">\(\gamma = \text{VaR}_{1 - \varepsilon} (X)\)</span>，显然，它与 <span class="arithmatex">\(\mathbf{w}\)</span> 的取值有关。</li>
<li><span class="arithmatex">\(p(x)\)</span> 是密度函数，代表使得 1 成立的 <span class="arithmatex">\(x\)</span> 的概率</li>
</ol>
<p>Rockafellar 和 Uryasev 证明了 <span class="arithmatex">\(F_{\alpha}(\textbf{w}, \gamma)\)</span> 对于 <span class="arithmatex">\(\gamma\)</span> 是凸函数。并且有：</p>
<div class="arithmatex">\[ \text{CVaR}_{1-\varepsilon} (X) = \mathop{\arg \min}_{\gamma} ~ F_{\varepsilon}(\textbf{w}, \gamma)\]</div>
<p>虽然转化为了一个凸优化问题，但是 <span class="arithmatex">\(E[\mathbf{w} \mathbf{r} - \gamma]^{+}\)</span> 同样不是很好计算，我们可以使用历史回报 <span class="arithmatex">\(\mathbf{r}_t\)</span> 来近似：</p>
<div class="arithmatex">\[\begin{align}
\mathop{\arg \min}_{\mathbf{w}, \mathbf{z}, \gamma} &amp; &amp; \gamma + \frac{1}{\varepsilon T} \sum_{t=1}^T z_t \\
\text{s.t.} &amp; &amp; \mathbf{1}^T \mathbf{w} = 1 \\
&amp; &amp; - \mathbf{w}^T\mathbf{r}_t - \gamma \leq z_t \leq 0
\end{align}\]</div>
<p>于是，该问题转化为了一个线性规划问题，可以简单求解。</p>
<h3 id="22-markowitz-framework-is-too-sensitive">2.2 Markowitz Framework Is Too Sensitive</h3>
<p>Markowitz 方法的第二个缺点是对参数过于敏感。<span class="arithmatex">\(\mathbf{\mu}\)</span> 和 <span class="arithmatex">\(\mathbf{\Sigma}\)</span> 的微小变化都能引起 <span class="arithmatex">\(\mathbf{w}\)</span> 的大幅变化，导致它要求频繁调整仓位。</p>
<h2 id="reference">Reference</h2>
<ol>
<li><a href="https://palomar.home.ece.ust.hk/papers/2016/Feng&amp;Palomar-FnT2016.pdf">Portfolio Optimization with Known Parameters</a></li>
<li><a href="https://medium.com/where-quant-meets-data-science/asset-allocation-using-convex-portfolio-optimization-f47398d4d613">Asset Allocation using Convex Portfolio Optimization</a></li>
</ol>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../../option/VolatilitySmile/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Volatility Smile" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Volatility Smile
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.a6c66575.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>